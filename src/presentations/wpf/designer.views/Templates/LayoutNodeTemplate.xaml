<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:nodes="clr-namespace:Mov.Designer.Service.Layouts.Nodes;assembly=Mov.Designer.Service"
    xmlns:selector="clr-namespace:Mov.Designer.Views.Selector">

    <selector:ContentSelector x:Key="contentSelector" />

    <DataTemplate x:Key="ContentTemplate" DataType="{x:Type nodes:ContentLayoutNode}">
        <StackPanel>
            <ContentControl Content="{Binding}" ContentTemplateSelector="{StaticResource contentSelector}" />
            <ItemsControl
                Margin="16,0,0,0"
                ItemTemplateSelector="{DynamicResource layoutNodeSelector}"
                ItemsSource="{Binding Children}" />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="ExpanderTemplate" DataType="{x:Type nodes:ExpanderLayoutNode}">
        <Expander IsExpanded="{Binding IsExpand.Value}">
            <Expander.Header>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name.Value}" />
                </StackPanel>
            </Expander.Header>
            <ItemsControl ItemTemplateSelector="{DynamicResource layoutNodeSelector}" ItemsSource="{Binding Children}" />
        </Expander>
    </DataTemplate>

    <DataTemplate x:Key="ScrollbarTemplate" DataType="{x:Type nodes:ScrollbarLayoutNode}">
        <ScrollViewer CanContentScroll="True" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <ItemsControl ItemTemplateSelector="{DynamicResource layoutNodeSelector}" ItemsSource="{Binding Children}" />
            </StackPanel>
        </ScrollViewer>
    </DataTemplate>

    <DataTemplate x:Key="TabTemplate" DataType="{x:Type nodes:TabLayoutNode}">
        <TabControl>
            <TabItem Header="タブ1">
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                    <ItemsControl ItemTemplateSelector="{DynamicResource layoutNodeSelector}" ItemsSource="{Binding Children}" />
                </Grid>
            </TabItem>
        </TabControl>
    </DataTemplate>

    <DataTemplate x:Key="ViewTemplate" DataType="{x:Type nodes:ContentLayoutNode}">
        <Grid>
            <ContentControl Content="{Binding}" ContentTemplateSelector="{StaticResource contentSelector}" />
        </Grid>
    </DataTemplate>

    <selector:LayoutNodeSelector
        x:Key="layoutNodeSelector"
        ContentTemplate="{StaticResource ContentTemplate}"
        ExpanderTemplate="{StaticResource ExpanderTemplate}"
        ScrollbarTemplate="{StaticResource ScrollbarTemplate}"
        TabTemplate="{StaticResource TabTemplate}"
        ViewTemplate="{StaticResource ViewTemplate}" />

</ResourceDictionary>