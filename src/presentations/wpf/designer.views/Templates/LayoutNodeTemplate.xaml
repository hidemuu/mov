<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:selector="clr-namespace:Mov.Designer.Views.Selector">

    <selector:ContentSelector x:Key="contentSelector" />

    <DataTemplate x:Key="ContentTemplate">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <ContentControl
                Grid.Row="0"
                Content="{Binding}"
                ContentTemplateSelector="{StaticResource contentSelector}" />
            <ItemsControl
                Grid.Row="1"
                Margin="16,0,0,0"
                ItemTemplateSelector="{DynamicResource layoutNodeSelector}"
                ItemsSource="{Binding Children}" />
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ExpanderTemplate">
        <Expander VerticalAlignment="Center" IsExpanded="{Binding IsExpanded.Value}">
            <Expander.Header>
                <StackPanel />
            </Expander.Header>
            <StackPanel Margin="0" HorizontalAlignment="Left">
                <ItemsControl ItemTemplateSelector="{DynamicResource layoutNodeSelector}" ItemsSource="{Binding Children}" />
            </StackPanel>
        </Expander>
    </DataTemplate>

    <DataTemplate x:Key="ScrollbarTemplate">
        <ScrollViewer CanContentScroll="True" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <ItemsControl ItemTemplateSelector="{DynamicResource layoutNodeSelector}" ItemsSource="{Binding Children}" />
            </StackPanel>
        </ScrollViewer>
    </DataTemplate>

    <DataTemplate x:Key="TabTemplate">
        <TabControl>
            <TabItem Header="タブ1">
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                    <ItemsControl ItemTemplateSelector="{DynamicResource layoutNodeSelector}" ItemsSource="{Binding Children}" />
                </Grid>
            </TabItem>
        </TabControl>

    </DataTemplate>

    <selector:LayoutNodeSelector
        x:Key="layoutNodeSelector"
        ContentTemplate="{StaticResource ContentTemplate}"
        ExpanderTemplate="{StaticResource ExpanderTemplate}"
        ScrollbarTemplate="{StaticResource ScrollbarTemplate}"
        TabTemplate="{StaticResource TabTemplate}" />

</ResourceDictionary>